(this["webpackJsonptwitch-emote-resizer-react"]=this["webpackJsonptwitch-emote-resizer-react"]||[]).push([[0],{26:function(e,t,n){},27:function(e,t,n){},28:function(e,t,n){},29:function(e,t,n){},31:function(e,t,n){},58:function(e,t,n){"use strict";n.r(t);var c=n(2),a=n.n(c),s=n(19),r=n.n(s),i=(n(26),n(27),n(3)),o=n(5),l=(n(28),n(29),n(0));var u=function(e){var t=e.clickHandler,n=e.children;return Object(l.jsx)("div",{className:"Button",onClick:t,children:n})};n(31);var j=function(e){var t=e.progress;return Object(l.jsx)("div",{className:"ProgressBar",children:Object(l.jsx)("div",{className:"ProgressBarInner",style:{width:"".concat(t,"%")}})})},h=n(20),d=n.n(h),g=n(10),b=n(21),f=n.n(b),v=n(14);function m(e){if(null===e)return 0;return Math.round((e.toDataURL("image/png").length-"data:image/png;base64,".length)*(3/4))}function O(e){return(e/1024).toFixed(2)}var p=function(){var e=Object(c.useState)(!1),t=Object(o.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(0),r=Object(o.a)(s,2),h=r[0],b=r[1],p=Object(c.useState)(""),x=Object(o.a)(p,2),w=x[0],y=x[1],N=Object(c.useState)(""),z=Object(o.a)(N,2),C=z[0],R=z[1],I=Object(c.useState)(""),B=Object(o.a)(I,2),D=B[0],S=B[1],k=Object(c.useRef)(null),L=Object(c.useRef)(null),P=Object(c.useRef)(null),T=[],H=Object(c.useRef)(null);T.push(H);var K=Object(c.useRef)(null);T.push(K);var M=Object(c.useRef)(null);T.push(M);var A=Object(c.useRef)(null);T.push(A);var U=Object(c.useRef)(null);T.push(U);var F=Object(c.useRef)(null);T.push(F);var E=function(e){e.current.toBlob((function(t){Object(v.saveAs)(t,"".concat(D,"@").concat(e.current.width,".png"))}))};return Object(l.jsxs)("div",{className:"DropZone"+(n?" Dragging":"")+(h>0&&h<100?" Loading":"")+(100===h?" Done":""),onDrop:function(e){e.preventDefault(),e.stopPropagation(),a(!1),e.dataTransfer.files[0]&&(S(e.dataTransfer.files[0].name.split(".")[0]),R(URL.createObjectURL(e.dataTransfer.files[0])),b(1),y("Loading image..."))},onDragEnter:function(e){e.preventDefault(),e.stopPropagation(),a(!0)},onDragLeave:function(e){e.preventDefault(),e.stopPropagation(),a(!1)},onDragOver:function(e){e.preventDefault(),e.stopPropagation()},children:[Object(l.jsx)("img",{className:"SourceImage",src:C,ref:L,onLoad:function(e){var t=L.current.naturalWidth,n=L.current.naturalHeight,c=Math.max(t,n);P.current.width=c,P.current.height=c;var a=P.current.getContext("2d"),s=Math.round((c-t)/2),r=Math.round((c-n)/2);a.drawImage(L.current,s,r);var o=0,l=0;b(10),y("Resizing image... (".concat(o,"/").concat(T.length,")"));var u,j=new d.a,h=Object(i.a)(T);try{var f=function(){var e=u.value;j.resize(P.current,e.current,{quality:3,alpha:!0}).then((function(){b(10+(o+=1)/T.length*70+l/T.length*20),y("Resizing image... (".concat(o,"/").concat(T.length,")"));var t=0;m(e.current)>25e3?function e(n,c){y("Compressing image... (Pass ".concat(++t,")"));var a=n.current.getContext("2d"),s=g.c.PointContainer.fromHTMLCanvasElement(n.current);g.b([s],{colors:Math.pow(2,c)}).then((function(e){var t=a.createImageData(n.current.width,n.current.height);t.data.set(g.a(s,e).toUint8Array()),a.putImageData(t,0,0)})).then((function(){m(n.current)>25e3&&c>0?e(n,c-1):(l+=1,b(10+o/T.length*70+l/T.length*20))}))}(e,15):(l+=1,b(10+o/T.length*70+l/T.length*20))}))};for(h.s();!(u=h.n()).done;)f()}catch(v){h.e(v)}finally{h.f()}},alt:"Source"}),Object(l.jsx)("canvas",{className:"SourceImage",ref:P}),Object(l.jsx)("input",{id:"ImageInput",type:"file",accept:"image/*",ref:k,style:{display:"none"},onChange:function(e){e.preventDefault(),e.stopPropagation(),e.target.files[0]&&(S(e.target.files[0].name.split(".")[0]),R(URL.createObjectURL(e.target.files[0])),b(1),y("Loading image..."))}}),Object(l.jsxs)("div",{className:"DropCallToAction",children:[Object(l.jsx)("h2",{children:"Drop your image here or "}),Object(l.jsx)(u,{clickHandler:function(e){k.current.click()},children:"Choose file"})]}),Object(l.jsxs)("div",{className:"LoadingContainer",children:[Object(l.jsx)("h4",{children:w}),Object(l.jsx)(j,{progress:h})]}),Object(l.jsxs)("div",{className:"ResizedContainer",children:[Object(l.jsxs)("div",{className:"ResizedRow",children:[Object(l.jsxs)("div",{onClick:function(){return E(M)},style:{cursor:"pointer"},children:[Object(l.jsx)("canvas",{className:"ResizedCanvas By112",width:"112",height:"112",ref:M}),Object(l.jsxs)("div",{className:"ImageSize",children:["112x112 (",O(m(M.current)),"KB)"]})]}),Object(l.jsxs)("div",{onClick:function(){return E(K)},style:{cursor:"pointer"},children:[Object(l.jsx)("canvas",{className:"ResizedCanvas By56",width:"56",height:"56",ref:K}),Object(l.jsxs)("div",{className:"ImageSize",children:["56x56 (",O(m(K.current)),"KB)"]})]}),Object(l.jsxs)("div",{onClick:function(){return E(H)},style:{cursor:"pointer"},children:[Object(l.jsx)("canvas",{className:"ResizedCanvas By28",width:"28",height:"28",ref:H}),Object(l.jsxs)("div",{className:"ImageSize",children:["28x28 (",O(m(H.current)),"KB)"]})]})]}),Object(l.jsxs)("div",{className:"ResizedRow",children:[Object(l.jsxs)("div",{onClick:function(){return E(F)},style:{cursor:"pointer"},children:[Object(l.jsx)("canvas",{className:"ResizedCanvas By72",width:"72",height:"72",ref:F}),Object(l.jsxs)("div",{className:"ImageSize",children:["72x72 (",O(m(F.current)),"KB)"]})]}),Object(l.jsxs)("div",{onClick:function(){return E(U)},style:{cursor:"pointer"},children:[Object(l.jsx)("canvas",{className:"ResizedCanvas By36",width:"36",height:"36",ref:U}),Object(l.jsxs)("div",{className:"ImageSize",children:["36x36 (",O(m(U.current)),"KB)"]})]}),Object(l.jsxs)("div",{onClick:function(){return E(A)},style:{cursor:"pointer"},children:[Object(l.jsx)("canvas",{className:"ResizedCanvas By18",width:"18",height:"18",ref:A}),Object(l.jsxs)("div",{className:"ImageSize",children:["18x18 (",O(m(A.current)),"KB)"]})]})]}),Object(l.jsxs)("div",{children:[Object(l.jsx)("p",{children:"Click an image to save it or"}),Object(l.jsx)(u,{clickHandler:function(e){var t,n=new f.a,c=Object(i.a)(T);try{var a=function(){var e=t.value;e.current.toBlob((function(t){n.file("".concat(D,"@").concat(e.current.width,".png"),t),Object.keys(n.files).length===T.length&&n.generateAsync({type:"blob"}).then((function(e){Object(v.saveAs)(e,"".concat(D,".zip"))}))}))};for(c.s();!(t=c.n()).done;)a()}catch(s){c.e(s)}finally{c.f()}},children:"Save all (.zip)"})]})]})]})},x=n.p+"static/media/info.ebce7ea8.svg",w=n.p+"static/media/github.16a9304e.svg";var y=function(){return Object(l.jsxs)("div",{className:"App",children:[Object(l.jsx)("h4",{children:"Twitch Emote Resizer"}),Object(l.jsx)(p,{}),Object(l.jsxs)("div",{className:"Info",children:[Object(l.jsx)("img",{src:x,className:"InfoIcon",alt:"info icon"}),Object(l.jsxs)("p",{children:["This page will resize an image into the sizes Twitch requires for emotes and badges.",Object(l.jsx)("br",{}),"If the resized image is larger than Twitch's size limit of 25KB, this page will also attempt to compress it.",Object(l.jsx)("br",{}),"Image processing is done in your browser. Your image never leaves your device."]})]}),Object(l.jsxs)("div",{className:"GitHub",onClick:function(){window.location.href="https://github.com/tma02/twitch-emote-resizer"},children:[Object(l.jsx)("img",{src:w,className:"GitHubIcon",alt:"GitHub icon"}),"View on GitHub"]}),Object(l.jsx)("div",{className:"Spacer"})]})},N=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,59)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),c(e),a(e),s(e),r(e)}))};r.a.render(Object(l.jsx)(a.a.StrictMode,{children:Object(l.jsx)(y,{})}),document.getElementById("root")),N()}},[[58,1,2]]]);
//# sourceMappingURL=main.31786bdd.chunk.js.map