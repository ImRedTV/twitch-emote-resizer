(this["webpackJsonptwitch-emote-resizer-react"]=this["webpackJsonptwitch-emote-resizer-react"]||[]).push([[0],{26:function(e,t,c){},27:function(e,t,c){},28:function(e,t,c){},29:function(e,t,c){},31:function(e,t,c){},58:function(e,t,c){},59:function(e,t,c){},60:function(e,t,c){"use strict";c.r(t);var n=c(2),a=c.n(n),s=c(19),r=c.n(s),i=(c(26),c(27),c(4)),o=c(3),l=(c(28),c(29),c(0));var u=function(e){var t=e.clickHandler,c=e.children;return Object(l.jsx)("div",{className:"Button",onClick:t,children:c})};c(31);var j=function(e){var t=e.progress;return Object(l.jsx)("div",{className:"ProgressBar",children:Object(l.jsx)("div",{className:"ProgressBarInner",style:{width:"".concat(t,"%")}})})},d=c(20),h=c.n(d),b=c(10),g=c(21),m=c.n(g),v=c(14);c(58),c(59);var O=function(e){var t=e.initialState,c=e.onToggle,a=Object(n.useState)(t),s=Object(o.a)(a,2),r=s[0],i=s[1];return Object(l.jsx)("div",{className:"ToggleSwitch"+(r?" On":""),onClick:function(){i(!r),c(!r)},children:Object(l.jsx)("div",{className:"Inner"})})},f=c.p+"static/media/moon.a82cae44.svg";var x=function(e){var t=e.emoteDataUrl,c=e.badgeDataUrl,a=Object(n.useState)(!1),s=Object(o.a)(a,2),r=s[0],i=s[1];return Object(l.jsxs)("div",{className:"TwitchPreview"+(r?" Light":""),children:[Object(l.jsxs)("div",{className:"ChatMessage",children:[Object(l.jsx)("img",{className:"BadgePreview",src:c}),Object(l.jsxs)("span",{children:[Object(l.jsx)("span",{className:"Username",children:"tee_maw"}),": "]}),Object(l.jsx)("img",{className:"EmotePreview",src:t})]}),Object(l.jsxs)("div",{className:"DarkToggle",children:[Object(l.jsx)("img",{src:f,className:"MoonIcon"+(r?" Light":"")}),Object(l.jsx)(O,{initialState:!r,onToggle:function(e){return i(!e)}})]})]})};function p(e){if(null===e)return 0;return Math.round((e.toDataURL("image/png").length-"data:image/png;base64,".length)*(3/4))}function w(e){return(e/1024).toFixed(2)}var N=function(){var e=Object(n.useState)(!1),t=Object(o.a)(e,2),c=t[0],a=t[1],s=Object(n.useState)(0),r=Object(o.a)(s,2),d=r[0],g=r[1],O=Object(n.useState)(""),f=Object(o.a)(O,2),N=f[0],R=f[1],C=Object(n.useState)(""),y=Object(o.a)(C,2),z=y[0],D=y[1],I=Object(n.useState)(""),S=Object(o.a)(I,2),B=S[0],L=S[1],k=Object(n.useState)(""),T=Object(o.a)(k,2),U=T[0],P=T[1],H=Object(n.useState)(""),M=Object(o.a)(H,2),K=M[0],A=M[1],E=Object(n.useRef)(null),F=Object(n.useRef)(null),G=Object(n.useRef)(null),q=[],J=Object(n.useRef)(null);q.push(J);var V=Object(n.useRef)(null);q.push(V);var W=Object(n.useRef)(null);q.push(W);var Y=Object(n.useRef)(null);q.push(Y);var Z=Object(n.useRef)(null);q.push(Z);var _=Object(n.useRef)(null);q.push(_);var Q=function(e){e.current.toBlob((function(t){Object(v.saveAs)(t,"".concat(B,"@").concat(e.current.width,".png"))}))};return Object(l.jsxs)("div",{className:"DropZone"+(c?" Dragging":"")+(d>0&&d<100?" Loading":"")+(100===d?" Done":""),onDrop:function(e){e.preventDefault(),e.stopPropagation(),a(!1),e.dataTransfer.files[0]&&(L(e.dataTransfer.files[0].name.split(".")[0]),D(URL.createObjectURL(e.dataTransfer.files[0])),g(1),R("Loading image..."))},onDragEnter:function(e){e.preventDefault(),e.stopPropagation(),a(!0)},onDragLeave:function(e){e.preventDefault(),e.stopPropagation(),a(!1)},onDragOver:function(e){e.preventDefault(),e.stopPropagation()},children:[Object(l.jsx)("img",{className:"SourceImage",src:z,ref:F,onLoad:function(e){var t=F.current.naturalWidth,c=F.current.naturalHeight,n=Math.max(t,c);G.current.width=n,G.current.height=n;var a=G.current.getContext("2d"),s=Math.round((n-t)/2),r=Math.round((n-c)/2);a.drawImage(F.current,s,r);var o=0,l=0;g(10),R("Resizing image... (".concat(o,"/").concat(q.length,")"));var u,j=new h.a,d=Object(i.a)(q);try{var m=function(){var e=u.value;j.resize(G.current,e.current,{quality:3,alpha:!0}).then((function(){g(10+(o+=1)/q.length*70+l/q.length*20),R("Resizing image... (".concat(o,"/").concat(q.length,")"));var t=0;p(e.current)>25e3?function e(c,n){R("Compressing image... (Pass ".concat(++t,")"));var a=c.current.getContext("2d"),s=b.c.PointContainer.fromHTMLCanvasElement(c.current);b.b([s],{colors:Math.pow(2,n)}).then((function(e){var t=a.createImageData(c.current.width,c.current.height);t.data.set(b.a(s,e).toUint8Array()),a.putImageData(t,0,0)})).then((function(){p(c.current)>25e3&&n>0?e(c,n-1):(l+=1,g(10+o/q.length*70+l/q.length*20)),112===c.current.width?P(c.current.toDataURL()):72===c.current.width&&A(c.current.toDataURL())}))}(e,15):(l+=1,g(10+o/q.length*70+l/q.length*20),112===e.current.width?P(e.current.toDataURL()):72===e.current.width&&A(e.current.toDataURL()))}))};for(d.s();!(u=d.n()).done;)m()}catch(v){d.e(v)}finally{d.f()}},alt:"Source"}),Object(l.jsx)("canvas",{className:"SourceImage",ref:G}),Object(l.jsx)("input",{id:"ImageInput",type:"file",accept:"image/*",ref:E,style:{display:"none"},onChange:function(e){e.preventDefault(),e.stopPropagation(),e.target.files[0]&&(L(e.target.files[0].name.split(".")[0]),D(URL.createObjectURL(e.target.files[0])),g(1),R("Loading image..."))}}),Object(l.jsxs)("div",{className:"DropCallToAction",children:[Object(l.jsx)("h2",{children:"Drop your image here or "}),Object(l.jsx)(u,{clickHandler:function(e){E.current.click()},children:"Choose file"})]}),Object(l.jsxs)("div",{className:"LoadingContainer",children:[Object(l.jsx)("h4",{children:N}),Object(l.jsx)(j,{progress:d})]}),Object(l.jsxs)("div",{className:"ResizedContainer",children:[Object(l.jsx)(x,{emoteDataUrl:U,badgeDataUrl:K}),Object(l.jsxs)("div",{className:"ResizedRow",children:[Object(l.jsxs)("div",{onClick:function(){return Q(W)},style:{cursor:"pointer"},children:[Object(l.jsx)("canvas",{className:"ResizedCanvas By112",width:"112",height:"112",ref:W}),Object(l.jsxs)("div",{className:"ImageSize",children:["112x112 (",w(p(W.current)),"KB)"]})]}),Object(l.jsxs)("div",{onClick:function(){return Q(V)},style:{cursor:"pointer"},children:[Object(l.jsx)("canvas",{className:"ResizedCanvas By56",width:"56",height:"56",ref:V}),Object(l.jsxs)("div",{className:"ImageSize",children:["56x56 (",w(p(V.current)),"KB)"]})]}),Object(l.jsxs)("div",{onClick:function(){return Q(J)},style:{cursor:"pointer"},children:[Object(l.jsx)("canvas",{className:"ResizedCanvas By28",width:"28",height:"28",ref:J}),Object(l.jsxs)("div",{className:"ImageSize",children:["28x28 (",w(p(J.current)),"KB)"]})]})]}),Object(l.jsxs)("div",{className:"ResizedRow",children:[Object(l.jsxs)("div",{onClick:function(){return Q(_)},style:{cursor:"pointer"},children:[Object(l.jsx)("canvas",{className:"ResizedCanvas By72",width:"72",height:"72",ref:_}),Object(l.jsxs)("div",{className:"ImageSize",children:["72x72 (",w(p(_.current)),"KB)"]})]}),Object(l.jsxs)("div",{onClick:function(){return Q(Z)},style:{cursor:"pointer"},children:[Object(l.jsx)("canvas",{className:"ResizedCanvas By36",width:"36",height:"36",ref:Z}),Object(l.jsxs)("div",{className:"ImageSize",children:["36x36 (",w(p(Z.current)),"KB)"]})]}),Object(l.jsxs)("div",{onClick:function(){return Q(Y)},style:{cursor:"pointer"},children:[Object(l.jsx)("canvas",{className:"ResizedCanvas By18",width:"18",height:"18",ref:Y}),Object(l.jsxs)("div",{className:"ImageSize",children:["18x18 (",w(p(Y.current)),"KB)"]})]})]}),Object(l.jsxs)("div",{children:[Object(l.jsx)("p",{children:"Click an image to save it or"}),Object(l.jsx)(u,{clickHandler:function(e){var t,c=new m.a,n=Object(i.a)(q);try{var a=function(){var e=t.value;e.current.toBlob((function(t){c.file("".concat(B,"@").concat(e.current.width,".png"),t),Object.keys(c.files).length===q.length&&c.generateAsync({type:"blob"}).then((function(e){Object(v.saveAs)(e,"".concat(B,".zip"))}))}))};for(n.s();!(t=n.n()).done;)a()}catch(s){n.e(s)}finally{n.f()}},children:"Save all (.zip)"})]})]})]})},R=c.p+"static/media/info.ebce7ea8.svg",C=c.p+"static/media/twitch-emote-resizer.a6e15172.svg",y=c.p+"static/media/github.16a9304e.svg";var z=function(){return Object(l.jsxs)("div",{className:"App",children:[Object(l.jsxs)("div",{className:"TitleRow",children:[Object(l.jsx)("img",{className:"Icon",src:C}),Object(l.jsx)("div",{className:"Title",children:"Twitch Emote Resizer"})]}),Object(l.jsx)(N,{}),Object(l.jsxs)("div",{className:"Info",children:[Object(l.jsx)("img",{src:R,className:"InfoIcon",alt:"info icon"}),Object(l.jsxs)("p",{children:["This site will resize an image into the sizes Twitch requires for emotes and badges.",Object(l.jsx)("br",{}),"If the resized image exceeds Twitch's size limit of 25KB, this site will attempt to compress it.",Object(l.jsx)("br",{}),"Image processing is done in your browser. Your image never leaves your device."]})]}),Object(l.jsxs)("div",{className:"GitHub",onClick:function(){window.location.href="https://github.com/tma02/twitch-emote-resizer"},children:[Object(l.jsx)("img",{src:y,className:"GitHubIcon",alt:"GitHub icon"}),"View on GitHub"]}),Object(l.jsx)("div",{className:"Spacer"})]})},D=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,61)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,s=t.getLCP,r=t.getTTFB;c(e),n(e),a(e),s(e),r(e)}))};r.a.render(Object(l.jsx)(a.a.StrictMode,{children:Object(l.jsx)(z,{})}),document.getElementById("root")),D()}},[[60,1,2]]]);
//# sourceMappingURL=main.9391922f.chunk.js.map