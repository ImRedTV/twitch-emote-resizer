(this["webpackJsonptwitch-emote-resizer-react"]=this["webpackJsonptwitch-emote-resizer-react"]||[]).push([[0],{26:function(e,t,n){},27:function(e,t,n){},28:function(e,t,n){},29:function(e,t,n){},31:function(e,t,n){},58:function(e,t,n){"use strict";n.r(t);var c=n(2),a=n.n(c),s=n(19),i=n.n(s),r=(n(26),n(27),n(3)),o=n(5),l=(n(28),n(29),n(0));var u=function(e){var t=e.clickHandler,n=e.children;return Object(l.jsx)("div",{className:"Button",onClick:t,children:n})};n(31);var j=function(e){var t=e.progress;return Object(l.jsx)("div",{className:"ProgressBar",children:Object(l.jsx)("div",{className:"ProgressBarInner",style:{width:"".concat(t,"%")}})})},d=n(20),h=n.n(d),b=n(10),g=n(21),f=n.n(g),v=n(14);function O(e){if(null===e)return 0;return Math.round((e.toDataURL("image/png").length-"data:image/png;base64,".length)*(3/4))}function m(e){return(e/1024).toFixed(2)}var p=function(){var e=Object(c.useState)(!1),t=Object(o.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(0),i=Object(o.a)(s,2),d=i[0],g=i[1],p=Object(c.useState)(""),x=Object(o.a)(p,2),w=x[0],y=x[1],z=Object(c.useState)(""),N=Object(o.a)(z,2),C=N[0],R=N[1],B=Object(c.useState)(""),I=Object(o.a)(B,2),D=I[0],k=I[1],S=Object(c.useRef)(null),L=Object(c.useRef)(null),P=[],T=Object(c.useRef)(null);P.push(T);var H=Object(c.useRef)(null);P.push(H);var K=Object(c.useRef)(null);P.push(K);var A=Object(c.useRef)(null);P.push(A);var U=Object(c.useRef)(null);P.push(U);var F=Object(c.useRef)(null);P.push(F);var E=function(e){e.current.toBlob((function(t){Object(v.saveAs)(t,"".concat(D,"@").concat(e.current.width,".png"))}))};return Object(l.jsxs)("div",{className:"DropZone"+(n?" Dragging":"")+(d>0&&d<100?" Loading":"")+(100===d?" Done":""),onDrop:function(e){e.preventDefault(),e.stopPropagation(),a(!1),e.dataTransfer.files[0]&&(k(e.dataTransfer.files[0].name.split(".")[0]),R(URL.createObjectURL(e.dataTransfer.files[0])),g(1),y("Loading image..."))},onDragEnter:function(e){e.preventDefault(),e.stopPropagation(),a(!0)},onDragLeave:function(e){e.preventDefault(),e.stopPropagation(),a(!1)},onDragOver:function(e){e.preventDefault(),e.stopPropagation()},children:[Object(l.jsx)("img",{className:"SourceImage",src:C,ref:L,onLoad:function(e){var t=0,n=0;g(10),y("Resizing image... (".concat(t,"/").concat(P.length,")"));var c,a=new h.a,s=Object(r.a)(P);try{var i=function(){var e=c.value;a.resize(L.current,e.current,{quality:3,alpha:!0}).then((function(){g(10+(t+=1)/P.length*70+n/P.length*20),y("Resizing image... (".concat(t,"/").concat(P.length,")"));var c=0;O(e.current)>25e3?function e(a,s){y("Compressing image... (Pass ".concat(++c,")"));var i=a.current.getContext("2d"),r=b.c.PointContainer.fromHTMLCanvasElement(a.current);b.b([r],{colors:Math.pow(2,s)}).then((function(e){var t=i.createImageData(a.current.width,a.current.height);t.data.set(b.a(r,e).toUint8Array()),i.putImageData(t,0,0)})).then((function(){O(a.current)>25e3&&s>0?e(a,s-1):(n+=1,g(10+t/P.length*70+n/P.length*20))}))}(e,15):(n+=1,g(10+t/P.length*70+n/P.length*20))}))};for(s.s();!(c=s.n()).done;)i()}catch(o){s.e(o)}finally{s.f()}}}),Object(l.jsx)("input",{id:"ImageInput",type:"file",accept:"image/*",ref:S,style:{display:"none"},onChange:function(e){e.preventDefault(),e.stopPropagation(),e.target.files[0]&&(k(e.target.files[0].name.split(".")[0]),R(URL.createObjectURL(e.target.files[0])),g(1),y("Loading image..."))}}),Object(l.jsxs)("div",{className:"DropCallToAction",children:[Object(l.jsx)("h2",{children:"Drop your image here or "}),Object(l.jsx)(u,{clickHandler:function(e){S.current.click()},children:"Choose file"})]}),Object(l.jsxs)("div",{className:"LoadingContainer",children:[Object(l.jsx)("h4",{children:w}),Object(l.jsx)(j,{progress:d})]}),Object(l.jsxs)("div",{className:"ResizedContainer",children:[Object(l.jsxs)("div",{className:"ResizedRow",children:[Object(l.jsxs)("div",{onClick:function(){return E(K)},style:{cursor:"pointer"},children:[Object(l.jsx)("canvas",{className:"ResizedCanvas By112",width:"112",height:"112",ref:K}),Object(l.jsxs)("div",{className:"ImageSize",children:["112x112 (",m(O(K.current)),"KB)"]})]}),Object(l.jsxs)("div",{onClick:function(){return E(H)},style:{cursor:"pointer"},children:[Object(l.jsx)("canvas",{className:"ResizedCanvas By56",width:"56",height:"56",ref:H}),Object(l.jsxs)("div",{className:"ImageSize",children:["56x56 (",m(O(H.current)),"KB)"]})]}),Object(l.jsxs)("div",{onClick:function(){return E(T)},style:{cursor:"pointer"},children:[Object(l.jsx)("canvas",{className:"ResizedCanvas By28",width:"28",height:"28",ref:T}),Object(l.jsxs)("div",{className:"ImageSize",children:["28x28 (",m(O(T.current)),"KB)"]})]})]}),Object(l.jsxs)("div",{className:"ResizedRow",children:[Object(l.jsxs)("div",{onClick:function(){return E(F)},style:{cursor:"pointer"},children:[Object(l.jsx)("canvas",{className:"ResizedCanvas By72",width:"72",height:"72",ref:F}),Object(l.jsxs)("div",{className:"ImageSize",children:["72x72 (",m(O(F.current)),"KB)"]})]}),Object(l.jsxs)("div",{onClick:function(){return E(U)},style:{cursor:"pointer"},children:[Object(l.jsx)("canvas",{className:"ResizedCanvas By36",width:"36",height:"36",ref:U}),Object(l.jsxs)("div",{className:"ImageSize",children:["36x36 (",m(O(U.current)),"KB)"]})]}),Object(l.jsxs)("div",{onClick:function(){return E(A)},style:{cursor:"pointer"},children:[Object(l.jsx)("canvas",{className:"ResizedCanvas By18",width:"18",height:"18",ref:A}),Object(l.jsxs)("div",{className:"ImageSize",children:["18x18 (",m(O(A.current)),"KB)"]})]})]}),Object(l.jsxs)("div",{children:[Object(l.jsx)("p",{children:"Click an image to save it or"}),Object(l.jsx)(u,{clickHandler:function(e){var t,n=new f.a,c=Object(r.a)(P);try{var a=function(){var e=t.value;e.current.toBlob((function(t){n.file("".concat(D,"@").concat(e.current.width,".png"),t),Object.keys(n.files).length===P.length&&n.generateAsync({type:"blob"}).then((function(e){Object(v.saveAs)(e,"".concat(D,".zip"))}))}))};for(c.s();!(t=c.n()).done;)a()}catch(s){c.e(s)}finally{c.f()}},children:"Save all (.zip)"})]})]})]})},x=n.p+"static/media/info.ebce7ea8.svg",w=n.p+"static/media/github.16a9304e.svg";var y=function(){return Object(l.jsxs)("div",{className:"App",children:[Object(l.jsx)("h4",{children:"Twitch Emote Resizer"}),Object(l.jsx)(p,{}),Object(l.jsxs)("div",{className:"Info",children:[Object(l.jsx)("img",{src:x,className:"InfoIcon",alt:"info icon"}),Object(l.jsxs)("p",{children:["This page will resize an image into the sizes Twitch requires for emotes and badges.",Object(l.jsx)("br",{}),"If the resized image is larger than Twitch's size limit of 25KB, this page will also attempt to compress it.",Object(l.jsx)("br",{}),"Image processing is done in your browser. Your image never leaves your device."]})]}),Object(l.jsxs)("div",{className:"GitHub",onClick:function(){window.location.href="https://github.com/tma02/twitch-emote-resizer"},children:[Object(l.jsx)("img",{src:w,className:"GitHubIcon"}),"View on GitHub"]}),Object(l.jsx)("div",{className:"Spacer"})]})},z=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,59)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),c(e),a(e),s(e),i(e)}))};i.a.render(Object(l.jsx)(a.a.StrictMode,{children:Object(l.jsx)(y,{})}),document.getElementById("root")),z()}},[[58,1,2]]]);
//# sourceMappingURL=main.4cfce757.chunk.js.map